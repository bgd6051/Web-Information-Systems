<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Cripton | Información sobre criptoactivos</title>

<!--META-->
<meta name="viewport" content="width=device-width initial-scale=1.0">

<!--FONTS-->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,400i,600,700" rel="stylesheet">
<link rel="icon" type="image/png" href="../icons/Bitcoin.webp">

<!--CSS-->
<link rel="stylesheet" type="text/css" href="../css/grid.css">
<link rel="stylesheet" type="text/css" href="../style.css">
<link rel="stylesheet" type="text/css" href="../css/menu.css">
<link rel="stylesheet" type="text/css" href="../css/jquery.bxslider.css">
<link rel="stylesheet" type="text/css" href="../css/responsive.css">
<link rel="stylesheet" type="text/css" href="../css/animate.css">

</head>

<body>
<div class="se-pre-con">
<div class="wrapper">
	<div class="cssload-loader"></div>
</div>
</div>
<header>
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="logo"><a href="../../"><img src="../images/logo.png" alt=""/></a></div>
        <nav class="nav-collapse">
          <ul>                                                                                
            <li class="menu-item"><a href="/">INICIO</a></li>
            <li class="menu-item"><a href="#poweredByCoingecko">COINGECKO</a></li>
            <li class="menu-item"><a href="../updating/">ACTUALIZAR BBDD</a></li>
            <li class="menu-item"><a href="#">LISTADOS</a></li>
            <li class="menu-item"><div class="signup"><a href="#">LOG IN</a></div></li>
            <li class="menu-item"><div class="signup"><a href="#">SIGN UP</a></div></li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
</header>
<section id="team">
    <div class="container os-animation" data-os-animation="zoomIn" data-os-animation-delay="0.7s">
        <div class="row">
            <div class="col-lg-12" style="margin-top: 100px;">
                <h2>Listados</h2>
                <p>Seleccione uno de los siguientes listados </p>
            </div>
        </div>
        
        <div id="listados" class="row">
            <div id="listadoDeCriptomonedas" class="col-lg-4 col-sm-4 col-md-4" onclick="listado(0)">
                <a href="#listadoActual">
                    <img src="../images/bitcoinPrice.avif" alt=""/>
                    <h3>Criptomonedas</h3>
                    <span>¿Bitcoin? ¿Ethereum? ¿A cual le está yendo mejor?</span>
                </a>
            </div>
            <div id="listadoDeNfts" class="col-lg-4 col-sm-4 col-md-4" onclick="listado(1)">
                <a href="#listadoActual">
                    <img src="../images/bestPerforming.jpeg" alt=""/>
                    <h3>Criptoactivos más populares</h3>
                    <span>Sean "memecoins" o nfts a todos nos gusta el verde</span>
                </a>
            </div>
            <div id="listadoExchanges" class="col-lg-4 col-sm-4 col-md-4" onclick="listado(2)">
                <a href="#listadoActual">
                    <img src="../images/exchanges.png" alt=""/>
                    <h3>Páginas de intercambio</h3>
                    <span>¿Que otras opciones hay a parte de binance?</span>
                </a>
            </div>
        </div>
    </div>
</section>
<section id="listadoActual" style="display: none; visibility: hidden;" class="row">
    <div id="seleccionDeFiltro" class="col-lg-4 col-sm-4 col-md-4">
        <p id="textoFiltro"></p>
        <textarea id="filtroTextarea"></textarea>
        <p id="textoOrden"></p>
        <select id="filtroOrden">
            <option value="no">no ordenar</option>
            <option value="asc">ascendiente</option>
            <option value="desc">descendiente</option>
        </select>
    </div>
    <ul id="contenidoActual" class="col-lg-8 col-sm-8 col-md-8">

    </ul>
</section>

<div class="client">
    <div class="container">
        <div class="row">
            <div class="col-lg-3 col-sm-6 col-md-3 os-animation" data-os-animation="zoomIn" data-os-animation-delay="0.3s">
                <img src="../images/bitcoin.webp" alt=""/>
            </div>
            <div class="col-lg-3 col-sm-6 col-md-3 os-animation" data-os-animation="zoomIn" data-os-animation-delay="0.5s">
            <img src="../images/ethereum.webp" alt=""/>
            </div>
            <div class="col-lg-3 col-sm-6 col-md-3 os-animation" data-os-animation="zoomIn" data-os-animation-delay="0.7s">
            <img src="../images/xrp.webp" alt=""/>
            </div>
            <div class="col-lg-3 col-sm-6 col-md-3 os-animation" data-os-animation="zoomIn" data-os-animation-delay="0.9s">
            <img src="../images/Tether.webp" alt=""/>
            </div>
        </div>
    </div>
</div>
    
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-sm-8 col-md-8">
                <div class="row">
                    <div class="col-lg-4 col-sm-4 col-md-4">
                        <article>
                        <h3>Creadores</h3>
                        <a>Bogdan Razvant Sofrone</a>
                        <a>Diego Suárez Etuláin</a>
                        </article>
                    </div>
                    <div class="col-lg-4 col-sm-4 col-md-4">
                        <article>
                        <h3>Grupo</h3>
                        <a>Grupo_70</a>
                        </article>
                    </div>
                    <div class="col-lg-4 col-sm-4 col-md-4">
                        <article>
                        <h3>Asignatura</h3>
                        <a>Sistemas De Información Web</a>
                        </article>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4 col-sm-4 col-md-4">
                <div class="max350">
                    <h3 id="poweredByCoingecko">
                        <img src="../images/DataPoweredByCoingecko.png" alt="coingecko">
                        <p>Powered By <a href="https://www.coingecko.com/">Coingecko.com</a></p>
                        <p>- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - </p>
                        <p>Coingecko demo API <a href="https://docs.coingecko.com/v3.0.1/reference/introduction">docs.coingecko.com</a></p>
                    </h3>
                </div>
            </div>
        </div>
    </div>
</footer>
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script src="../js/jquery.bxslider.js"></script>
<script src="../js/fixed-responsive-nav.js"></script> 
<script src="../js/waypoints.min.js"></script>
<script src="../js/script.js"></script>
<script>
    var filtroAnt = -1;
    function listado(Nfiltro) {
        var textosDeFiltro = [
            "Precios mayores o iguales al dado.",
            "Precios mayores o iguales al dado.",
            "Pais a filtrar."
        ];
        var textosDeOrden = [
            "Ordenar por precios descendentes?",
            "Ordenar por precios descendentes?",
            "Ordenar por antiguedad ascendente?"
        ];
        //var filtros = ["listadoDeCriptomonedasFiltro","listadoDeNftsFiltro","listadoExchangesFiltro"];
        var textoFiltro = document.getElementById("textoFiltro");
        textoFiltro.innerHTML = textosDeFiltro[Nfiltro]; 
        var textoOrden = document.getElementById("textoOrden");
        textoOrden.innerHTML = textosDeOrden[Nfiltro];

        var filtro = document.getElementById("filtro").value;
        //var filtro = "none"//sin filtro
        var resultado = document.getElementById("contenidoActual");
        if(Nfiltro != filtroAnt){
            filtroAnt = Nfiltro;
            filtro = "none"
        }
        //ToDo ¿esta ordenado? -> obtener del filtroOrden
        var filtroOrden = "no";
        //var filtroOrden = document.getElementById("filtroOrden");

        var params = "?Nfiltro="+Nfiltro;
        if(filtroOrden != "no"){
            params += "&filtroOrden="+filtroOrden;
        }
        params += "&filtro="+filtro;
        var xhr = new XMLHttpRequest();
        var url = "../../src/listings"+params; //url de AJAX
        console.log("AJAX request: ", url);
        xhr.open("GET", url, true);

        xhr.onload = function(){
            if(xhr.status === 200){
                console.log("AJAX response: ", xhr);
                resultado.innerHTML = xhr.responseText;
            } else{
                resultado.innerHTML = xhr.responseText = "error al cargar el listado" + Nfiltro;
            } 
        };

        xhr.send();
        console.log("AJAX request sent");

        const listadoActual = document.getElementById("listadoActual");
        listadoActual.style.visibility = "visible";
        listadoActual.style.display = "flex";
    }
</script>
</body>
</html>
